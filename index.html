<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Impacto Preciso</title>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:white;
  text-align:center;
}

header{
  padding:20px;
}

#logo{
  width:250px;
  margin-bottom:10px;
}

.game-container{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:40px;
  padding:20px;
}

#board{
  width:300px;
  height:300px;
  border-radius:50%;
  background:radial-gradient(circle, red 20%, white 20%, white 40%, red 40%, red 60%, white 60%, white 80%, red 80%);
  position:relative;
  cursor:pointer;
}

#dart{
  width:20px;
  height:20px;
  background:black;
  border-radius:50%;
  position:absolute;
  transform:translate(-50%,-50%);
  display:none;
}

#ranking{
  width:250px;
  background:rgba(255,255,255,0.1);
  padding:15px;
  border-radius:10px;
  backdrop-filter:blur(10px);
}

input,button{
  padding:8px;
  margin:5px;
  border-radius:5px;
  border:none;
}

button{
  cursor:pointer;
  background:#00c6ff;
  color:white;
}

@media(max-width:768px){
  .game-container{
    flex-direction:column;
    align-items:center;
  }
}
</style>
</head>
<body>

<header>
<img src="logo.png" id="logo">
<h1>Impacto Preciso üéØ</h1>
</header>

<input type="text" id="playerName" placeholder="Tu nombre">
<button onclick="startGame()">Iniciar Juego</button>

<h2 id="timer">Tiempo: 10</h2>
<h2 id="score">Puntos: 0</h2>

<div class="game-container">

<div id="board" onclick="throwDart(event)">
<div id="dart"></div>
</div>

<div id="ranking">
<h3>üèÜ Ranking Global</h3>
<div id="rankingList"></div>
</div>

</div>

<script>
// üî• PON TU CONFIGURACI√ìN AQU√ç
 const firebaseConfig = {
    apiKey: "AIzaSyAqtmeHSpa61uEtgHUW0UB_euPWjWjG-IA",
    authDomain: "impacto-preciso.firebaseapp.com",
    projectId: "impacto-preciso",
    storageBucket: "impacto-preciso.firebasestorage.app",
    messagingSenderId: "769895871874",
    appId: "1:769895871874:web:a964369999bdd42cc04b9b",
    measurementId: "G-RZ22G5N8M2"
  };

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let time = 10;
let score = 0;
let gameActive = false;
let interval;

function startGame(){
  const name = document.getElementById("playerName").value;
  if(name === ""){
    alert("Escribe tu nombre");
    return;
  }

  score = 0;
  time = 10;
  gameActive = true;
  document.getElementById("score").innerText = "Puntos: 0";
  document.getElementById("timer").innerText = "Tiempo: 10";

  interval = setInterval(()=>{
    time--;
    document.getElementById("timer").innerText = "Tiempo: " + time;
    if(time <= 0){
      clearInterval(interval);
      gameActive = false;
      saveScore(name, score);
    }
  },1000);
}

function throwDart(event){
  if(!gameActive) return;

  const board = document.getElementById("board");
  const rect = board.getBoundingClientRect();
  const x = event.clientX - rect.left;
  const y = event.clientY - rect.top;

  const centerX = rect.width/2;
  const centerY = rect.height/2;

  const distance = Math.sqrt((x-centerX)**2 + (y-centerY)**2);

  let points = 0;

  if(distance < 30) points = 100;
  else if(distance < 60) points = 80;
  else if(distance < 90) points = 60;
  else if(distance < 120) points = 40;
  else if(distance < 150) points = 20;

  score += points;
  document.getElementById("score").innerText = "Puntos: " + score;

  const dart = document.getElementById("dart");
  dart.style.left = x + "px";
  dart.style.top = y + "px";
  dart.style.display = "block";
}

function saveScore(nombre, puntos){
  db.collection("ranking").add({
    nombre: nombre,
    puntos: puntos,
    fecha: new Date()
  });
}

db.collection("ranking")
.orderBy("puntos","desc")
.limit(10)
.onSnapshot(snapshot=>{
  let html = "";
  snapshot.forEach(doc=>{
    const data = doc.data();
    html += `<p>${data.nombre} - ${data.puntos} pts</p>`;
  });
  document.getElementById("rankingList").innerHTML = html;
});
</script>

</body>
</html>
